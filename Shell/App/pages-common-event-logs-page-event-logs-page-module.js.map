{"version":3,"sources":["./src/app/pages/common/event-logs-page/event-logs-page.page.html","./src/app/pages/common/event-logs-page/event-logs-page.module.ts","./src/app/pages/common/event-logs-page/event-logs-page.page.scss","./src/app/pages/common/event-logs-page/event-logs-page.page.ts"],"names":[],"mappings":"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","file":"pages-common-event-logs-page-event-logs-page-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>EventLogPage</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n    <ion-grid class=\\\"ion-no-padding\\\">\\n        <ion-row>\\n          <ion-col class=\\\"ion-no-padding\\\">\\n            <ion-toolbar>\\n              <ion-buttons slot=\\\"start\\\">\\n                <ion-back-button text=\\\"Configuración\\\" icon=\\\"arrow-round-back\\\" [defaultHref]=\\\"defaultHref\\\"></ion-back-button>\\n              </ion-buttons>\\n    \\n              <span class=\\\"title\\\">| Eventos de sistema </span>\\n            </ion-toolbar>\\n          </ion-col>\\n          <ion-col class=\\\"ion-no-padding\\\">\\n           \\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    \\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n\\n        <div class=\\\"input-group search-place \\\">\\n          <!-- <input #inputSearch class=\\\"form-control border-right-0 border\\\" type=\\\"search\\\" placeholder=\\\"Buscar\\\"\\n            (search)=\\\"search($event)\\\"> -->\\n          <!-- <span class=\\\"input-group-append\\\">\\n            <button class=\\\"btn btn-outline-secondary border-left-0 border\\\" type=\\\"button\\\" (click)=\\\"search($event)\\\">\\n              <ion-icon name=\\\"search\\\" class=\\\"icon-search-azul\\\"></ion-icon>\\n            </button>\\n          </span> -->\\n        </div>\\n\\n      </ion-col>\\n    </ion-row>\\n\\n  </ion-grid>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col class=\\\"ion-no-padding\\\">\\n        <ion-button fill=\\\"clear\\\" (click)=\\\"delete()\\\" *ngIf=\\\"selection.selected.length > 0\\\">\\n          <ion-icon slot=\\\"start\\\" name=\\\"trash\\\"></ion-icon>\\n          Eliminar seleccionados\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n\\n\\n        <!-- Tabla -->\\n        <ng-container>\\n\\n\\n          <sfs-table class=\\\"hidde-when-mobile\\\" [data]=\\\"data\\\" [columns]=\\\"tableColumns\\\"\\n            [displayedColumns]=\\\"displayedColumns\\\" [pagination]=\\\"pagination\\\" (onPageChange)=\\\"handlePageChange($event)\\\">\\n          </sfs-table>\\n\\n        </ng-container>\\n        <ng-template #guidEventCell let-value=\\\"value\\\" let-row=\\\"row\\\">\\n          <div>\\n            <mat-checkbox (click)=\\\"$event.stopPropagation()\\\" (change)=\\\"$event ? selection.toggle(row) : null\\\"\\n              [checked]=\\\"selection.isSelected(row)\\\" [aria-label]=\\\"checkboxLabel(row)\\\"></mat-checkbox>\\n          </div>\\n        </ng-template>\\n        <ng-template #titleCell  let-value=\\\"value\\\" let-row=\\\"row\\\">\\n          <div class=\\\"navigation-cell\\\" (click)=\\\"edit(row)\\\">\\n            {{ row?.Title }} \\n          </div>\\n\\n\\n\\n        </ng-template>\\n\\n        <ng-template #createdDateCell let-value=\\\"value\\\" let-row=\\\"row\\\">\\n        \\n\\n          {{row?.CreatedDate + \\\"Z\\\"| timeAgo}}\\n        </ng-template>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EventLogsPage } from './event-logs-page.page';\nimport { SFSCommonModule } from 'sfscommon';\nimport { timeagoModule } from 'src/app/pipes/common/timeago.module';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EventLogsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    SFSCommonModule,\n    MatCheckboxModule,\n    IonicModule,\n    timeagoModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [EventLogsPage]\n})\nexport class EventLogsPageModule {}\n","export default \":host ::ng-deep .error {\\n  background-color: pink;\\n}\\n:host ::ng-deep mat-checkbox .mat-checkbox-inner-container {\\n  background-color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbWlydHJldmluby9EZXYvS1MuVGltZS9zcmMvS1MuVGltZS9DbGllbnQvSW9uaWMtS1NUaW1lL3NyYy9hcHAvcGFnZXMvY29tbW9uL2V2ZW50LWxvZ3MtcGFnZS9ldmVudC1sb2dzLXBhZ2UucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9jb21tb24vZXZlbnQtbG9ncy1wYWdlL2V2ZW50LWxvZ3MtcGFnZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDSSxzQkFBQTtBQ0FSO0FERUk7RUFDSSx1QkFBQTtBQ0FSIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY29tbW9uL2V2ZW50LWxvZ3MtcGFnZS9ldmVudC1sb2dzLXBhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3QgOjpuZy1kZWVwe1xuICAgIC5lcnJvcntcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcGluaztcbiAgICB9XG4gICAgbWF0LWNoZWNrYm94IC5tYXQtY2hlY2tib3gtaW5uZXItY29udGFpbmVye1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICB9XG5cbiAgICAuY3JvcHtcbiAgICAgICBcbiAgICB9XG59XG5cblxuIiwiOmhvc3QgOjpuZy1kZWVwIC5lcnJvciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHBpbms7XG59XG46aG9zdCA6Om5nLWRlZXAgbWF0LWNoZWNrYm94IC5tYXQtY2hlY2tib3gtaW5uZXItY29udGFpbmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59Il19 */\";","import { sfsService } from 'src/app/services/common/sfs.service';\nimport { AppListBaseTypedPage } from 'src/app/pages/common/app-list-base-typed/app-list-base-typed.page';\nimport { Component, OnInit, Injector, ViewChild, TemplateRef } from '@angular/core';\nimport { secEventLogModel } from 'src/app/models/common/system-models';\nimport { DataService, UserService, ServiceData } from 'sfscommon';\nimport { TimeAgoPipe } from 'src/app/pipes/common/timeago';\n\n\n@Component({\n  selector: 'app-event-logs-page',\n  templateUrl: './event-logs-page.page.html',\n  styleUrls: ['./event-logs-page.page.scss'],\n})\nexport class EventLogsPage extends AppListBaseTypedPage<secEventLogModel> implements OnInit {\n  @ViewChild('guidEventCell') public guidEventCell: TemplateRef<any>;\n  @ViewChild('titleCell') public titleCell: TemplateRef<any>;\n  @ViewChild('createdDateCell') public createdDateCell: TemplateRef<any>;\n  \n  constructor(public injector: Injector,\n    public userService: UserService, public sfsService:sfsService) { \n      super(injector);\n      this.data = [];\n      // Se inicializan\n      this.pagination = {\n        total: 0,\n        pageIndex: 1,\n        pageSize: 10,\n        previousPageIndex: 0\n      };\n\n      this.defaultHref = \"configuration\";\n      this.serviceData = new ServiceData();\n  }\n\n  async ionViewWillEnter() {\n    if (this.loadingData == false) { await this.loadData(); }\n  }\n\n  public async ngOnInit() {\n\n    this.userData = await this.userService.getUserData();\n    let query: string;\n\n    await this.bindData();\n  }\n  \n  public async bindData() {\n    try {\n      this.tableColumns = [\n        {\n          cellTemplate: this.guidEventCell,\n          name: '',\n          cellClass: this.getCellClass,\n          prop: secEventLogModel.PropertyNames.GuidMyEventLog,\n          sortable: false,\n        },\n        {\n          cellTemplate: this.titleCell,\n          name: 'Título',\n          cellClass: this.getCellClass,\n          prop: secEventLogModel.PropertyNames.Title,\n          sortable: false,\n        },\n        {\n          cellTemplate: this.createdDateCell,\n          name: '',\n          cellClass: this.getCellClass,\n          prop: secEventLogModel.PropertyNames.CreatedDate,\n        }];\n\n\n      this.serviceData = {\n\n        Page: 1,\n        PageSize: 10,\n        RestServiceAppKey: 'SFSCoreSecurity', // no es necesario si se trata de la aplicación de negocio, en este caso se especifica porque estamos usando el servicio de la app core\n        EntitySet: secEventLogModel._EntitySetName,\n        Fields: `${secEventLogModel.PropertyNames.Title},${secEventLogModel.PropertyNames.IsException}`,\n        \n        FreeText: this.serviceData.FreeText,\n        AllFields: true,\n        SortBy: 'CreatedDate',\n        SortDirection: 'desc',\n\n      };\n\n      await this.configurePagination(this.serviceData);\n\n      this.tempPagination = { ...this.pagination };\n      this.tempPagination.pageIndex = 1;\n\n      // Se recuperan los primeros elementos.\n      this.data = await this.getData();\n    }\n    catch (error) { this.logError(error); }\n    finally { this.loadingData = false; }\n  }\n\n  getCellClass(row:secEventLogModel){\n      if (row != null && row.IsException == true ){\n        return \"error \";\n      }else{\n        return \"\";\n      }\n  }\n\n  async delete(){\n    let modalResponse = await this.showConfirm(this.selection.selected.length);\n   \n     if (modalResponse == true) {\n         let response = await this.sfsService.Delete(this.selection.selected.map(({ GuidMyEventLog }) => GuidMyEventLog), secEventLogModel._EntitySetName);\n         \n          this.selection.clear();\n   \n         this.bindData();\n     }else{\n       \n     }\n   }\n  \n  async edit(row:secEventLogModel){\n    console.log(\"ax77\", row);\n    this.navCtrl.navigateForward(`system/events/detail/${row.GuidMyEventLog}`, { animated: true });\n  }\n  \n  \n\n\n}\n"],"sourceRoot":"webpack:///"}