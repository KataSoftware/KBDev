{"version":3,"sources":["./src/app/pages/common/user-create/user-create.page.html","./src/app/pages/common/user-create/user-create.module.ts","./src/app/pages/common/user-create/user-create.page.scss","./src/app/pages/common/user-create/user-create.page.ts"],"names":[],"mappings":"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","file":"pages-common-user-create-user-create-module.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n    <ion-grid class=\\\"ion-no-padding\\\">\\n        <ion-row>\\n          <ion-col class=\\\"ion-no-padding\\\">\\n              <ion-toolbar>\\n              <ion-buttons slot=\\\"start\\\">\\n                  <ion-back-button text=\\\"Usuarios\\\" icon=\\\"arrow-round-back\\\" [defaultHref]=\\\"defaultHref\\\"></ion-back-button>\\n                </ion-buttons>\\n         \\n            <span class=\\\"title\\\">| Usuario </span>\\n            </ion-toolbar>\\n          </ion-col>\\n          <ion-col class=\\\"ion-no-padding ion-text-end buttons-form\\\" >\\n              <ion-button (click)=\\\"goBack()\\\" size=\\\"default\\\" class=\\\" sfs-button secondary\\\" fill=\\\"clear\\\" >\\n                  Cancelar\\n                </ion-button>\\n                <ion-button [disabled]=\\\"this.form.invalid == true || disabledButton == true\\\" (click)=\\\"saveData()\\\" size=\\\"default\\\"\\n                  class=\\\"sfs-button primary\\\">\\n                  {{ activatingText }} \\n                </ion-button>\\n            </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n  <ion-grid> \\n    <form [formGroup]=\\\"form\\\">\\n         \\n         <ion-row>\\n        <ion-col size-xs=\\\"12\\\" size-lg=\\\"12\\\">\\n          <!-- Correo electrónico -->\\n          <ion-item lines=\\\"none\\\" class=\\\"item-form-group form-group sfs-form-item\\\" formGroupName=\\\"User\\\" >\\n            <ion-label position=\\\"stacked\\\">Correo electrónico</ion-label>\\n            <ion-input  [ngClass]=\\\"{ 'sfs-input':true, 'form-control': true, 'is-invalid':  email.touched &&  email.errors }\\\" type=\\\"email\\\" (ionChange)=\\\"emailAvailable()\\\" debounce=\\\"500\\\" formControlName=\\\"Email\\\">\\n            </ion-input>\\n          </ion-item>\\n          <div class=\\\"error-container\\\">\\n            \\n            <div class=\\\"error-message\\\" *ngIf=\\\"email.errors && email.errors['email'] == true\\\">\\n              \\n              La información ingresada no corresponde a un email\\n            </div>\\n            <div class=\\\"error-message\\\" *ngIf=\\\"emailInUse == true\\\">\\n              \\n               El correo electrónico ya ha sido registrado\\n              </div>\\n          </div>\\n        </ion-col>\\n     \\n\\n\\n\\n        <ion-col size-xs=\\\"12\\\" size-lg=\\\"12\\\">\\n            <!-- Correo electrónico -->\\n            <ion-item lines=\\\"none\\\" class=\\\"item-form-group form-group sfs-form-item\\\" formGroupName=\\\"User\\\" >\\n              <ion-label position=\\\"stacked\\\">Nombre</ion-label>\\n              <ion-input [ngClass]=\\\"{ 'sfs-input':true, 'form-control': true, 'is-invalid':  firstName.touched &&  firstName.errors }\\\"   type=\\\"text\\\"  debounce=\\\"500\\\" formControlName=\\\"FirstName\\\">\\n              </ion-input>\\n            </ion-item>\\n            \\n          </ion-col>\\n\\n\\n          <ion-col size-xs=\\\"12\\\" size-lg=\\\"12\\\">\\n              <!-- Correo electrónico -->\\n              <ion-item lines=\\\"none\\\" class=\\\"item-form-group form-group sfs-form-item\\\" formGroupName=\\\"User\\\" >\\n                <ion-label position=\\\"stacked\\\">Apellidos</ion-label>\\n                <ion-input  [ngClass]=\\\"{ 'sfs-input':true, 'form-control': true, 'is-invalid':  lastName.touched &&  lastName.errors }\\\"  type=\\\"lastName\\\"  debounce=\\\"500\\\" formControlName=\\\"LastName\\\">\\n                </ion-input>\\n              </ion-item>\\n            \\n              \\n            </ion-col>\\n\\n            <!-- <ion-col size-xs=\\\"12\\\" size-lg=\\\"12\\\">\\n               \\n                <ion-item lines=\\\"none\\\" class=\\\"item-form-group form-group sfs-form-item\\\" formGroupName=\\\"User\\\" >\\n                  <ion-label position=\\\"stacked\\\">Contraseña</ion-label>\\n                  <ion-input  [ngClass]=\\\"{ 'sfs-input':true, 'form-control': true, 'is-invalid':  lastName.touched &&  lastName.errors }\\\"  type=\\\"text\\\"  debounce=\\\"500\\\" formControlName=\\\"Password\\\">\\n                  </ion-input>\\n                </ion-item>\\n              \\n                \\n              </ion-col>\\n\\n -->\\n\\n\\n\\n      </ion-row>\\n    </form>\\n  </ion-grid>\\n\\n</ion-content>\\n\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserCreatePage } from './user-create.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserCreatePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [UserCreatePage]\n})\nexport class UserCreatePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NvbW1vbi91c2VyLWNyZWF0ZS91c2VyLWNyZWF0ZS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit, Injector } from '@angular/core';\nimport { StorageService, UserService, BasePage, ApiResponse } from 'sfscommon';\nimport { FormGroup, FormControl, Validators, FormArray, AbstractControl } from '@angular/forms';\nimport { secUserModel } from 'src/app/models/common/system-models';\nimport { sfsService } from 'src/app/services/common/sfs.service';\n\n// Third Library Imports\n\n\n@Component({\n  selector: 'app-user-create',\n  templateUrl: './user-create.page.html',\n  styleUrls: ['./user-create.page.scss'],\n})\nexport class UserCreatePage extends BasePage implements OnInit {\n\n  defaultHref: string;\n  \n  loadingData: boolean = true;\n  guidUser: string = null;\n  form: FormGroup;\n  public get user(): FormGroup { return <FormGroup>this.form.get('User'); }\n  public get email(): AbstractControl { return <AbstractControl>this.form.get('User.Email'); }\n  public get firstName(): AbstractControl { return <AbstractControl>this.form.get('User.FirstName'); }\n  public get lastName(): AbstractControl { return <AbstractControl>this.form.get('User.LastName'); }\n\n  public get password(): AbstractControl { return <AbstractControl>this.form.get('User.Password'); }\n\n\n\n  activatingText: string = 'Guardar';\n  disabledButton: boolean = false;\n  textoModal: string=null;\n  emailInUse: boolean;\n\n  constructor(public injector: Injector,\n\n    public storage: StorageService,\n    public userService: UserService,\n    public sfsService: sfsService\n\n  ) {\n    super(injector);\n    this.title = 'Información del cliente';\n\n    this.form = new FormGroup({\n      User: new FormGroup({\n        Email: new FormControl('', [Validators.required, Validators.email]),\n        FirstName: new FormControl('', [Validators.required]),\n        LastName: new FormControl('', [Validators.required]),\n        //Password: new FormControl(null),\n      })\n    });\n\n    this.guidUser = this.route.snapshot.paramMap.get('guidUser');\n    console.log(\"ctor guidUser\", this.guidUser);\n    this.defaultHref = \"system/users\";\n  }\n\n  async ngOnInit() {\n    this.getData();\n\n  }\n  initialEmail:string = null ;\n  async getData() {\n    let user: secUserModel = null;\n    console.log(\"guidUser\", this.guidUser);\n    if (this.guidUser != null) {\n      \n      let response = await this.sfsService.GetItem(this.guidUser, secUserModel._EntitySetName);\n\n      if (response.status == \"success\") {\n        user = response.data;\n        \n        if (user != null) {\n          this.initialEmail =  user.Email;\n          this.email.setValue(user.Email);\n          this.firstName.setValue(user.FirstName);\n          this.lastName.setValue(user.LastName);\n         // this.password.setValue(user.Password);\n        }\n      }\n    }\n  }\n  async  emailAvailable() {\n    if (this.guidUser != null && this.initialEmail != this.email.value){\n      this.emailInUse = await this.sfsService.IsEmailAvailable(this.email.value) === false;\n      console.log(\"emailin use\", this.emailInUse);\n    }else{\n      this.emailInUse = false;\n    }\n  }\n  async goBack() {\n\n\n    this.navCtrl.navigateForward(`system/users`, { animated: true });\n\n  }\n\n  async saveData() {\n    this.activatingText = 'Guardando...';\n    this.disabledButton = true;\n    this.loadingData = true;\n\n    if (this.form.valid == true) {\n      const user: secUserModel = this.form.value.User;\n      user.UserName = user.Email;\n      user.GuidUser = this.guidUser;\n      let apiResponse: ApiResponse<any> = null;\n\n      if (this.guidUser != null) {\n\n\n        apiResponse = await this.sfsService.Update(user, secUserModel._EntitySetName, \"Email,UserName,FirstName,LastName\");\n\n      } else {\n\n        apiResponse = await this.sfsService.Create(user, secUserModel._EntitySetName);\n\n      }\n\n      this.loadingData = false;\n      this.activatingText = 'Guardado';\n      this.disabledButton = false;\n      if (apiResponse.status == 'success') {\n\n\n       \n\n        \n        this.goBack();\n      }\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}