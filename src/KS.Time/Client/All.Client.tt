<#@ template hostspecific="True"  debug="True" language="C#" #><#@ output extension="txt"  #>
<#@ import namespace="SFS.VSExtension2019.Model" #>
<#@ import namespace="SFS.VSExtension2019.Model.Utils" #>
<#@ import namespace="SFS.VSExtension2019.EngTool" #>
<#@ dom processor="SFSEdmxProcessor"  requires="EntityModel='KSTimeModel.edmx'"  #>
<#@ include file="SaveOutput.tt" #>
<#@ include file="utils.tt" #>

<#@ include file="model.tt" #>
<#	

	foreach(EntityInfo entity in Model.Entities.Where(p=>p.GenerateCRUD == true)){
		try{
			if (string.IsNullOrEmpty(entity.DefaultProperty)){
				entity.DefaultProperty = entity.Properties[0].Name;
			}
			//string entityPluralName = null;
			
			
		
			//GenerateGeneric(entity);
			string folderPages = @"Ionic-KSTime\src\app\sfs\models\codegen\";
			GenerateModel(entity);
			SaveOutput(folderPages + "\\" + entity.Name + ".model.ts", @"");  
	
			this.GenerationEnvironment.Clear();
	
		}catch(Exception ex){
			throw new Exception(string.Format("El error ocurri� en la entidad {0}",entity.Name),ex);
		}
	}

	//
	
	//GeneratePagesRouting(Model);
	//SaveOutput(@"Ionic-KSTime\src\app\app-rounting-gen.module.ts", @"");  

	

	//GenerateAllModels(Model);
	//SaveOutput("AllModels.gen.cs", @"Models");  
			
#>
