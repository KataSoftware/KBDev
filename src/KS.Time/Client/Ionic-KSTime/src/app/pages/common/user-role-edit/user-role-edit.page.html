<ion-header>
    <ion-toolbar>
    </ion-toolbar>
  </ion-header>
  
<ion-content class="ion-padding">
    <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col class="ion-no-padding" size="8" >
              <ion-toolbar>
              <ion-buttons slot="start">
                  <ion-back-button text="Usuarios y roles" icon="arrow-round-back" [defaultHref]="defaultHref"></ion-back-button>
                </ion-buttons>
         
            <span class="title">| Usuario y rol</span>
            </ion-toolbar>
          </ion-col>
          <ion-col class="ion-no-padding ion-text-end buttons-form" size="4" >
              <ion-button (click)="goBack()" size="default" class=" sfs-button secondary" fill="clear" >
                  Cancelar
                </ion-button>
                <ion-button [disabled]="this.form.invalid == true || disabledButton == true" (click)="saveData()" size="default"
                  class="sfs-button primary">
                  {{ activatingText }} 
                </ion-button>
            </ion-col>
        </ion-row>
      </ion-grid>
  <ion-grid > 
    <form [formGroup]="form">
         
         <ion-row *ngIf="guidUserFrom == null">
        <ion-col size-xs="12" size-lg="12">
         
          <ion-item lines="none" class="item-form-group form-group sfs-form-item" formGroupName="UserRole" >
            <ion-label position="stacked">Correo electrónico</ion-label>
            <ion-input  [ngClass]="{ 'sfs-input':true, 'form-control': true, 'is-invalid':  email.touched &&  email.errors }" type="email" (ionChange)="isEmailRegistered()" debounce="500" formControlName="Email">
            </ion-input>
          </ion-item>
          <div class="error-container">
  
            <div class="error-message" *ngIf="email.errors && email.errors['email'] == true">
              
              La información ingresada no corresponde a un email
            </div>
          
            
          </div>
        </ion-col>

      </ion-row>

      <ion-row *ngIf="guidUserFrom == null">
        <ion-col size-xs="12" size-lg="12">
         
          
            <ion-item lines="none" class="form-group item-form-group sfs-form-item" formGroupName="UserRole" lines="none">
              <ion-label position="stacked">Nombre</ion-label>
              <ion-input [disabled]="user != null" [ngClass]="{ 'sfs-input':true, 'form-control': true, 'is-invalid':  firstName.touched &&  firstName.errors }" type="text"  debounce="500" formControlName="FirstName">
              </ion-input>
            </ion-item>

          
          </ion-col>

        </ion-row>
        <ion-row>
          <ion-col size-xs="12" size-lg="12" *ngIf="guidUserFrom == null">
             
              <ion-item lines="none"  class="item-form-group sfs-form-item" formGroupName="UserRole" >
                <ion-label position="stacked">Apellidos</ion-label>
                <ion-input [ngClass]="{ 'sfs-input':true, 'form-control': true, 'is-invalid':  lastName.touched &&  lastName.errors }" [disabled]="user != null"   type="text"  debounce="500" formControlName="LastName">
                </ion-input>
              </ion-item>
             
            </ion-col> 
          </ion-row>

          <ion-row *ngIf="user == null && guidUserFrom == null">
              <ion-col size-xs="12" size-lg="12">
                 
                  <ion-item lines="none"  class="item-form-group sfs-form-item" formGroupName="UserRole" >
                    <ion-label position="stacked">Contraseña</ion-label>
                    <ion-input [ngClass]="{ 'sfs-input':true, 'form-control': true }" [disabled]="user != null"   type="text"  debounce="500" formControlName="Password">
                    </ion-input>
                  </ion-item>
                 
                </ion-col> 
              </ion-row>


            <ion-row *ngIf="user != null && guidUserFrom == null">
            <ion-col size-xs="12" size-lg="12"> 
              <ion-item lines="none"  class="item-form-group sfs-form-item" formGroupName="UserRole" >
                <ion-label position="stacked">Usuario</ion-label>
                <mat-select formControlName="GuidUser" [ngClass]="{ 'sfs-input':true, 'form-control': true, 'is-invalid':  guidUser.touched &&  guidUser.errors }" >
                  
                  <mat-option *ngFor="let user of users" [value]="user.GuidUser">{{user.DisplayName}}</mat-option>
               
                </mat-select>
                
                
 
              </ion-item>
            </ion-col>

          </ion-row>
          <ion-row>
            <ion-col size-xs="12" size-lg="12"> 
              <ion-item lines="none"  class="item-form-group sfs-form-item"  formGroupName="UserRole" >
                <ion-label position="stacked">Rol</ion-label>
                <mat-select formControlName="GuidRole"  [ngClass]="{ 'sfs-input':true, 'form-control': true, 'is-invalid':  guidRole.touched &&  guidRole.errors }" >
                  <mat-option [value]="" selected>None</mat-option>
                  <mat-option *ngFor="let role of roles" [value]="role.GuidRole">{{role.RoleName}}</mat-option>
               
                </mat-select>
               
              </ion-item>
            </ion-col>

          </ion-row>


      
    </form>
  </ion-grid>
</ion-content>
